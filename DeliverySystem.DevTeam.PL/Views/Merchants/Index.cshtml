@model IEnumerable<Merchant>

@{
	ViewData["Title"] = "Merchants";
}



<div class="card shadow-sm">
	<div class="card-header">
		<h3 class="card-title">
			<div class="symbol symbol-40px me-4">
				<div class="symbol-label fs-2 fw-semibold text-success">
					<!--begin::Svg Icon | path: icons/duotune/general/gen002.svg-->
					<span class="svg-icon svg-icon-2 svg-icon-primary">
						<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M16.0173 9H15.3945C14.2833 9 13.263 9.61425 12.7431 10.5963L12.154 11.7091C12.0645 11.8781 12.1072 12.0868 12.2559 12.2071L12.6402 12.5183C13.2631 13.0225 13.7556 13.6691 14.0764 14.4035L14.2321 14.7601C14.2957 14.9058 14.4396 15 14.5987 15H18.6747C19.7297 15 20.4057 13.8774 19.912 12.945L18.6686 10.5963C18.1487 9.61425 17.1285 9 16.0173 9Z" fill="currentColor" />
							<rect opacity="0.3" x="14" y="4" width="4" height="4" rx="2" fill="currentColor" />
							<path d="M4.65486 14.8559C5.40389 13.1224 7.11161 12 9 12C10.8884 12 12.5961 13.1224 13.3451 14.8559L14.793 18.2067C15.3636 19.5271 14.3955 21 12.9571 21H5.04292C3.60453 21 2.63644 19.5271 3.20698 18.2067L4.65486 14.8559Z" fill="currentColor" />
							<rect opacity="0.3" x="6" y="5" width="6" height="6" rx="3" fill="currentColor" />
						</svg>
					</span>
				</div>
			</div>

			<!--end::Svg Icon-->
			Merchants
		</h3>
		<div class="card-toolbar">

			<a asp-controller="Merchants" asp-action="Create" class="btn btn-sm btn-primary">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-square-dotted" viewBox="0 0 16 16">
					<path d="M2.5 0q-.25 0-.487.048l.194.98A1.5 1.5 0 0 1 2.5 1h.458V0zm2.292 0h-.917v1h.917zm1.833 0h-.917v1h.917zm1.833 0h-.916v1h.916zm1.834 0h-.917v1h.917zm1.833 0h-.917v1h.917zM13.5 0h-.458v1h.458q.151 0 .293.029l.194-.981A2.5 2.5 0 0 0 13.5 0m2.079 1.11a2.5 2.5 0 0 0-.69-.689l-.556.831q.248.167.415.415l.83-.556zM1.11.421a2.5 2.5 0 0 0-.689.69l.831.556c.11-.164.251-.305.415-.415zM16 2.5q0-.25-.048-.487l-.98.194q.027.141.028.293v.458h1zM.048 2.013A2.5 2.5 0 0 0 0 2.5v.458h1V2.5q0-.151.029-.293zM0 3.875v.917h1v-.917zm16 .917v-.917h-1v.917zM0 5.708v.917h1v-.917zm16 .917v-.917h-1v.917zM0 7.542v.916h1v-.916zm15 .916h1v-.916h-1zM0 9.375v.917h1v-.917zm16 .917v-.917h-1v.917zm-16 .916v.917h1v-.917zm16 .917v-.917h-1v.917zm-16 .917v.458q0 .25.048.487l.98-.194A1.5 1.5 0 0 1 1 13.5v-.458zm16 .458v-.458h-1v.458q0 .151-.029.293l.981.194Q16 13.75 16 13.5M.421 14.89c.183.272.417.506.69.689l.556-.831a1.5 1.5 0 0 1-.415-.415zm14.469.689c.272-.183.506-.417.689-.69l-.831-.556c-.11.164-.251.305-.415.415l.556.83zm-12.877.373Q2.25 16 2.5 16h.458v-1H2.5q-.151 0-.293-.029zM13.5 16q.25 0 .487-.048l-.194-.98A1.5 1.5 0 0 1 13.5 15h-.458v1zm-9.625 0h.917v-1h-.917zm1.833 0h.917v-1h-.917zm1.834-1v1h.916v-1zm1.833 1h.917v-1h-.917zm1.833 0h.917v-1h-.917zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" />
				</svg>
				Add
			</a>
		</div>
	</div>
	<div class="card-body">
		@if (!Model.Any())
		{
			<div class="alert alert-dismissible bg-light-warning border border-warning border-dashed d-flex flex-column flex-sm-row w-100 p-5 mb-10">

				<div class="d-flex flex-column pe-0 pe-sm-10">

					<h5 class="mb-1">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-octagon" viewBox="0 0 16 16">
							<path d="M4.54.146A.5.5 0 0 1 4.893 0h6.214a.5.5 0 0 1 .353.146l4.394 4.394a.5.5 0 0 1 .146.353v6.214a.5.5 0 0 1-.146.353l-4.394 4.394a.5.5 0 0 1-.353.146H4.893a.5.5 0 0 1-.353-.146L.146 11.46A.5.5 0 0 1 0 11.107V4.893a.5.5 0 0 1 .146-.353zM5.1 1 1 5.1v5.8L5.1 15h5.8l4.1-4.1V5.1L10.9 1z" />
							<path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z" />
						</svg>

						Merchants Not Found !!

					</h5>

				</div>

			</div>
		}
		else
		{

			<div class="table-responsive">
				<table class="table table-row-dashed table-row-gray-300 gy-7">
					<thead>
						<tr class="fw-bold fs-6 text-gray-800">
							<th>Name</th>
							<th>Email</th>
							<th>Status</th>
							<th>Address</th>
							<th>Phone</th>
							<th>Created On</th>
							<th>Last Updated On</th>
							<th>Action</th>

						</tr>
					</thead>
					<tbody>
						@foreach (var merchant in Model)
						{
							<tr>
								<td>@merchant.Name</td>
								<td>@merchant.Email</td>
								<td>
									<span class="badge badge-@(merchant.IsDeleted ? "danger" : "success") js-status">
										@(merchant.IsDeleted ? "Deleted" : "Available")
									</span>

								</td>
								<td>@merchant.Address</td>
								<td>@merchant.PhoneNumber</td>
								<td>@merchant.CreatedOn</td>
								<td class="js-updated-on">@merchant.LastUpdatedOn</td>
								<td>
									@* <a class="btn btn-sm btn-outline btn-outline-dashed btn-outline-primary btn-active-light-primary" asp-controller="Merchants" asp-action="Edit" asp-route-id="@merchant.Id">
							Edit
							</a> *@
									<div class="dropdown">
										<button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
											Dropdown button
										</button>
										<ul class="dropdown-menu">

											<li><a asp-controller="Merchants" asp-action="Edit" class="dropdown-item" asp-route-id="@merchant.Id">Edit</a> </li>
											<li> <a class="dropdown-item js-toggle-status" data-id="@merchant.Id" href="javascript:;">Toggle Status</a></li>

										</ul>
									</div>
								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>


		}
	</div>

</div>

@Html.AntiForgeryToken()
@section Scripts 
{
@* 	<script>


		$(document).ready(function () {


			// On document ready

			$('body').delegate('.js-toggle-status', 'click', function () {

				var btn = $(this);
				var id = btn.data('id');


				bootbox.confirm({
					message: 'Are you sure you want to change the status of this Merchant?',
					buttons: {
						confirm: {
							label: 'Yes',
							className: 'btn-success'
						},
						cancel: {
							label: 'No',
							className: 'btn-danger'
						}
					},
					callback: function (result) {

						if (result) {
							$.post({
								url: '/Merchants/ToggleStatus/' + btn.data('id'),
								data: {
									'__RequestVerificationToken': $('input[name="__RequestVerificationToken"]').val()
								},
								success: function (LastUpdatedOn) {
									// js-update
									var row = btn.parents('tr');
									var status = row.find('.js-status');
									var NewStatus = status.text().trim() === 'Deleted' ? 'Available' : 'Deleted'
									status.text(NewStatus).toggleClass('badge badge-danger badge badge-success');
									row.find('.js-updated-on').html(LastUpdatedOn);
									row.addClass('animate__animated animate__flash');
									ShowSuccessFullyMessage();
								},

								error: function () {


									ShowErrorMessage();
								}
							});
						}
					}
				});




			});

		})
	</script> *@

}
